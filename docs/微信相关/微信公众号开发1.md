---
title: 微信开发指南
---

#### 填写服务器的配置

1. 登录微信公众平台官网后，在公众平台官网的开发-基本设置页面，勾选协议成为开发者
2. 点击“修改配置”按钮，填写服务器地址（URL）、Token和EncodingAESKey，其中URL是开发者用来接收微信消息和事件的接口URL。
3. Token可由开发者可以任意填写，用作生成签名（该Token会和接口URL中包含的Token进行比对，从而验证安全性）。EncodingAESKey由开发者手动填写或随机生成，将用作消息体加解密密钥。

#### 来自微信服务器的消息验证

1. 开发者提信息后，微信服务器将发送get请求到填写的服务器地址url上

|参数|含义|
|---|----|
|signature|微信加密签名，signature结合了开发者填写的token参数和请求中的timestamp参数、nonce参数。|
|timestamp|时间戳|
|nonce|随机数|
|echostr|随机字符串|


2.成为开发者后，用户每次向公众号发送消息、或者产生自定义菜单、或产生微信支付订单等情况时，开发者填写的服务器配置URL将得到微信服务器推送过来的消息和事件，开发者可以依据自身业务逻辑进行响应，如回复消息。


3.微信公众号接口必须以http://或https://开头，分别支持80端口和443端口。

#### 自定义菜单

* 自定义菜单最多包括3个一级菜单，每个一级菜单最多包含5个二级菜单。
* 一级菜单最多4个汉字，二级菜单最多7个汉字，多出来的部分将会以“...”代替。
* 创建自定义菜单后，菜单的刷新策略是，在用户进入公众号会话页或公众号profile页时，如果发现上一次拉取菜单的请求在5分钟以前，就会拉取一下菜单，如果菜单有更新，就会刷新客户端的菜单。测试时可以尝试取消关注公众账号后再次关注，则可以看到创建后的效果。​

具体配置可以查看官方文档 [微信开放文档](https://developers.weixin.qq.com/doc/)

```json
 {
     "button":[
     {	
          "type":"click",
          "name":"今日歌曲",
          "key":"V1001_TODAY_MUSIC"
      },
      {
           "name":"菜单",
           "sub_button":[
           {	
               "type":"view",
               "name":"搜索",
               "url":"http://www.soso.com/"
            },
            {
                 "type":"miniprogram",
                 "name":"wxa",
                 "url":"http://mp.weixin.qq.com",
                 "appid":"wx286b93c14bbf93aa",
                 "pagepath":"pages/lunar/index"
             },
            {
               "type":"click",
               "name":"赞一下我们",
               "key":"V1001_GOOD"
            }]
       }]
 }
```

#### 自定义菜单